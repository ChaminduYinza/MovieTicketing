<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="description" content="Interior-Design-Responsive-Website-Templates-Edge">
      <title>ONLINE MOVIE CENTER</title>
      <link rel="icon" href="assets/images/logowithoutBorder.png" type="image/gif" sizes="26x26">
      <link rel="favicon" href="assets/images/favicon.png">
      <link rel="stylesheet" media="screen" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,700">
      <link rel="stylesheet" href="assets/css/bootstrap.min.css">
      <link rel="stylesheet" href="assets/css/font-awesome.min.css">
      <link rel="stylesheet" href="assets/css/main.css">
      <link rel="stylesheet" href="assets/css/bootstrap-theme.css" media="screen">
      <link rel="stylesheet" href="assets/css/style.css">
      <link rel="stylesheet" href="assets/css/checkbox.css">

      <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
   </head>
   <link href="https://fonts.googleapis.com/css?family=Cinzel" rel="stylesheet">
   <style type="text/css">
      h1{
      font-family: 'Cinzel', serif;font-weight: bold;
      }
      strong{
      color:#444e5d;
      }
   </style>
   <body>
      <!-- Fixed navbar -->
      <div class="navbar navbar-inverse" style="position: absolute;z-index: 1;    border-bottom: 3px solid #8b6e32;">
         <div class="container">
            <div class="navbar-header">
               <!-- Button for smallest screens -->
               <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button>
               <a class="navbar-brand" href="index.html" style="margin-top: -20px;position: absolute;z-index: 2;top:50px;left: 15%;">
               <img src="assets/images/logo.PNG" class="img-responsive" alt="logo" style="width: 120px;height: 120px;    background: rgba(0, 0, 0, 0.7);"></a>
            </div>
            <div class="navbar-collapse collapse">
               <ul class="nav navbar-nav pull-right mainNav">
                  <li class="active"><a href="index.html">Home</a></li>
               </ul>
            </div>
         </div>
      </div>
      <!-- /.navbar -->
      <header id="head" class="secondary">
         <div class="container">
            <div class="row">
               <div class="col-md-12" align="center" class="hidden-xs">
                  <h1  class="hidden-xs"  style="font-size:55px;color:#9b7835;">ONLINE MOVIE CENTER</h1>
               </div>
            </div>
         </div>
      </header>
      <script>
         var app = angular.module('seatApp', []);
         app.controller('seatCtrl', function($scope, $http) {
            //Creating SEAT Order
             $scope.seatList = [
         
                 {
                     "seatNumber":"A1"
                 },{
                     "seatNumber":"A2"
                     },{
                     "seatNumber":"A3"
                     },{
                     "seatNumber":"A4"
                     },{
                     "seatNumber":"A5"
                     },{
                     "seatNumber":"A6"},{
                     "seatNumber":"A7"},{
                     "seatNumber":"A8"},{
                     "seatNumber":"A9"},{
                     "seatNumber":"B1"},{
                     "seatNumber":"B2"},{
                     "seatNumber":"B3"},{
                     "seatNumber":"B4"},{
                     "seatNumber":"B5"},{
                     "seatNumber":"B6"},{
                     "seatNumber":"B7"},{
                     "seatNumber":"B8"},{
                     "seatNumber":"B9"},{
                     "seatNumber":"C1"},{
                     "seatNumber":"C2"},{
                     "seatNumber":"C3"},{
                     "seatNumber":"C4"},{
                     "seatNumber":"C5"},{
                     "seatNumber":"C6"},{
                     "seatNumber":"C7"},{
                     "seatNumber":"C8"},{
                     "seatNumber":"C9"},{
                     "seatNumber":"D1"},{
                     "seatNumber":"D2"},{
                     "seatNumber":"D3"},{
                     "seatNumber":"D4"},{
                     "seatNumber":"D5"},{
                     "seatNumber":"D6"},{
                     "seatNumber":"D7"},{
                     "seatNumber":"D8"},{
                     "seatNumber":"D9"},{
                     "seatNumber":"E1"},{
                     "seatNumber":"E2"},{
                     "seatNumber":"E3"},{
                     "seatNumber":"E4"},{
                     "seatNumber":"E5"},{
                     "seatNumber":"E6"},{
                     "seatNumber":"E7"},{
                     "seatNumber":"E8"},{
                     "seatNumber":"E9"},{
                     "seatNumber":"F1"},{
                     "seatNumber":"F2"},{
                     "seatNumber":"F3"},{
                     "seatNumber":"F4"},{
                     "seatNumber":"F5"},{
                     "seatNumber":"F6"},{
                     "seatNumber":"F7"},{
                     "seatNumber":"F8"},{
                     "seatNumber":"F9"}
         
                 
         
             ];
         $scope.SeatNumbersString = "";
         $scope.isPaid = false;
             $scope.selection=[];
             $scope.price = 0;
             $scope.totalPrice = 0;
             $scope.snackPrice = 0;
             $scope.totalItemList = [];
               $scope.movies = ["WARCRAFT", "JUSTICE LEAGUE", "KONG SKULL ISLAND"
               , "CAPTAIN NAWAB", "Beauty & The Beast", "SPIDERMAN", "FAULADI LOHA 2"];
         
                $scope.sNacks = ["POPCORN", "PIZZA", "PEPSI","Coca-Cola"
               ];
         
         $scope.theaters = ["MC-Platinum", "Delux", "Gold"
               ];
         
               
               $scope.movieTimes = ["10.30 AM", "1.30 PM", "4.15 PM", "7.15 PM", "9.20 PM"
               ];
         
         
         $scope.calculateTotalPrice=function(){
         $scope.totalPrice = $scope.price+$scope.snackPrice;
         }
         
         $scope.changedSnack=function(item){
         if(item == "POPCORN"){
         $scope.snackPrice = 150;
         $scope.totalPrice = $scope.price+$scope.snackPrice;
         }else if(item == "PIZZA"){
         
         $scope.snackPrice = 750;
         $scope.totalPrice = $scope.price+$scope.snackPrice;
         
         }else if(item == "Coca-Cola"){
         
         $scope.snackPrice = 100;
         $scope.totalPrice = $scope.price+$scope.snackPrice;
         }else if(item == "PEPSI"){
         
         $scope.snackPrice = 100;
         $scope.totalPrice = $scope.price+$scope.snackPrice;
         }
         
         }    
         
         
         $scope.toggleSelection = function toggleSelection(seatSelector) {
         
         var idx = $scope.selection.indexOf(seatSelector);
         
         // is currently selected
         if (idx > -1) {
          $scope.selection.splice(idx, 1);
         }
         
         // is newly selected
         else {
          $scope.selection.push(seatSelector);
          $scope.price = $scope.selection.length * 350;
          $scope.totalPrice = $scope.price+$scope.snackPrice;
          
         }
         };
         
         
         
         
                  $scope.addSampathPayment = function addSampathPayment() {
         
                 
         
         
            $scope.totalItemList = {
         
                "cardNumber":$scope.cardNumber,
                "customerName":$scope.customerName,
                "cSV":$scope.cSV,
               "amount":$scope.totalPrice
               
         
            }
                    
                    
                     $http({
         'url' : 'http://192.168.16.102:9766/sampath-payment-gateway/CreditSampath',
         'method' : 'POST',
         'headers': {'Content-Type' : 'application/json'},
         'data' : $scope.totalItemList
         }).then(function (success){
         alert('Successfully Added to the system');
         $scope.isPaid = true;
         
         },function (error){
         alert('Something went wrong, please try again')
         
         });
         
         };
         
         
         
         $scope.addEzCash = function addEzCash() {
         
            for(var i = 0; i < $scope.selection.length; i++){
         
                    $scope.SeatNumbersString = $scope.SeatNumbersString+ $scope.selection[i].seatNumber;
            }
            
            $scope.totalItemList = {
         
                "mobileNumber":$scope.mobileNumber,
                "pinNumber":$scope.pinNumber,
                "amount":$scope.totalPrice
               
         
            }
                    
                    
                     $http({
         'url' : 'http://192.168.16.102:9766/dialog-payment-gateway/DialogEzCash',
         'method' : 'POST',
         'headers': {'Content-Type' : 'application/json'},
         'data' : $scope.totalItemList
         }).then(function (success){
         alert('Successfully Added to the system');
          $scope.isPaid = true;
         
         },function (error){
         alert('Something went wrong, please try again')
         
         });
         
         };
         
         
         
         
         $scope.addToBooking = function addToBooking() {
         
            for(var i = 0; i < $scope.selection.length; i++){
         
                    $scope.SeatNumbersString = $scope.SeatNumbersString+ $scope.selection[i].seatNumber;
            }
         
            $scope.totalItemList = {
         
                "customerName":"A",
                "movieName":$scope.selectedMovie,
                "movieTime":$scope.selectedmovieTime,
                "seatNumbers":$scope.SeatNumbersString,
                "snackOrder":$scope.selectedSnack
         
            }
                    
                    $scope.totalPrice = $scope.price+$scope.snackPrice;
                     $http({
         'url' : 'http://192.168.16.102:9766/movie/movieReservation',
         'method' : 'POST',
         'headers': {'Content-Type' : 'application/json'},
         'data' : $scope.totalItemList
         }).then(function (success){
         alert('Successfully Added to the system')
         
         },function (error){
         alert('Something went wrong, please try again')
         
         });
         
         };
         
         
         
         
         });
      </script>
      <section ng-app="seatApp" ng-controller="seatCtrl"  class="container">
         <div class="row">
            <!-- main content -->
            <div class="col-md-6 col-sm-6 col-xs-6 maincontent">
               <h3 style="font-size: 30px;">SELECT YOUR SEATS</h3>
               <div class="plane">
                <hr > </hr>
               <h2 style="text-align: center;background:black;color:white;font-size:20px; font-weight: 500;"> MOVIE SCREEN </h2>
                  <ul style="column-count:7;-webkit-column-count:6; -moz-column-count:7;" class="">
                     <li ng-repeat="X in seatList">
                        <!-- 
                           <input class="btn btn-primary" type="checkbox" value="{{X.seatNumber}}" ng-checked="selection.indexOf(X.seatNumber) > -1"  /> 
                           -->
                           <!-- <div > -->
                           <label >
                        <input  id="{{X.seatNumber}}" type="checkbox" value="{{X.seatNumber}}" ng-checked="selection.indexOf(X.seatNumber) > -1" ng-click="toggleSelection(X.seatNumber)" />
                         {{X.seatNumber}} </label>
                           <!-- </div> -->
                     </li>
                  </ul>
               </div>
            </div>
            <!-- /main -->
            <!-- Sidebar -->
            <aside class="col-md-3 col-sm-3 col-xs-3 sidebar sidebar-right">
               <div class="panel">
                  <h2 style="font-size:30px;"> MOVIE SELECTION</h2>
                  <p> 
                  </p>
                  <p style="font-size:16px;color:red;"> MOVIE : </p>
                  <select    style="font-size:20px; " ng-model="selectedMovie" ng-options="x for x in movies"> </select>
                  <br>
                  <br>
                  <p style="font-size:16px;color:red;"> SNACK TYPE PRICE   </p>
                  <p style="font-size:16px;color:green;"> LKR : {{snackPrice}} </p>
                  <select  ng-change="changedSnack(selectedSnack)"  style="font-size:20px; " ng-model="selectedSnack" ng-options="x for x in sNacks"> </select>
                  <br>
                  <br>
                  <p style="font-size:16px;color:red;"> THEATER NAME   </p>
                  <select style="font-size:20px; " ng-model="selectedTheaters" ng-options="x for x in theaters"> </select>
                  <br>
                  <br>
                  <p style="font-size:16px;color:red;"> MOVIE TIME   </p>
                  <select style="font-size:20px; " ng-model="selectedmovieTime" ng-options="x for x in movieTimes"> </select>
               </div>
               <input type="button" value="Calculate Total Price" ng-click="calculateTotalPrice()" />
               <br>
               <div>
                  </br>
                  <p style="font-size:16px;color:green;" > TOTAL PRICE : {{totalPrice}}</p>
                  
                  <input type="button" value="Submit" ng-click="addToBooking()" ng-show="isPaid" ng-disabled="!isPaid" />
               </div>
               <!-- <img src="assets/images/slides/2.JPG" alt="" class="img-rounded pull-right" width="300"> -->
            </aside>
            <aside class="col-md-3 col-sm-3 col-xs-3 sidebar sidebar-right">
               <div class="panel">
                  <h2 style="font-size:30px;"> PAYMENT METHODS</h2>
                  <p> 
                  </p>
                  <p style="font-size:16px;color:red;"> SELECT A PAYMENT TYPE : </p>
                  <select style="font-size:20px;"" ng-model="paymentDropdown">
                     <option value="eCash">Dialog EZ Cash</option>
                     <option value="cPayment">Sampath Credit Payment</option>
                  </select>
                  <div ng-show="paymentDropdown=='eCash'">
                     <form>
                        <br>
                        <p> MOBILE NUMBER : </p>
                        <input type="text" ng-model="mobileNumber" required />
                        </p>
                        <br>
                        <p> PIN NUMBER : </p>
                        <input type="text" ng-model="pinNumber" required/>
                        </p>
                        <br>
                        <p style="font-size:16px;color:green" >  AMOUNT : {{totalPrice}}</p>
                        </p>
                        <br>
                        <input type="submit" value="Submit" ng-click="addEzCash()"/>
                     </form>
                  </div>
                  <div ng-show="paymentDropdown=='cPayment'">
                     <form>
                        <br>
                        <p> CARD NUMBER : </p>
                        <input type="text" ng-model="cardNumber" required />
                        </p>
                        <br>
                        <p> CUSTOMER NAME : </p>
                        <input type="text" ng-model="customerName" required/>
                        </p>
                        <br>
                        <p> CSV NUMBER : </p>
                        <input type="text" ng-model="cSV" required/>
                        </p>
                        <br>
                        <p style="font-size:16px;color:green" > AMOUNT : {{totalPrice}}</p>
                        </p>
                        <br>
                        <input type="submit" value="Submit" ng-click="addSampathPayment()"/>
                     </form>
                  </div>
               </div>
            </aside>
            <!-- /Sidebar -->
         </div>
      </section>
      <!-- /container -->
      <section>
         </div>
         </div>
         </div>
      </section>
      <footer id="footer">
         <div class="container">
            <div class="social text-center">
               <a href="#"><i class="fa fa-twitter"></i></a>
               <a href="#"><i class="fa fa-facebook"></i></a>
               <a href="#"><i class="fa fa-pinterest"></i></a>
               <a href="#"><i class="fa fa-youtube"></i></a>
            </div>
            <div class="clear"></div>
            <!--CLEAR FLOATS-->
         </div>
         <div class="footer2" id="f2">
            <div class="container">
               <div class="row">
                  <div class="col-md-6 panel" style="border-top: 3px solid #757472">
                     <div class="panel-body">
                        <p class="simplenav">
                           <a href="index.html">Home</a> 
                        </p>
                     </div>
                  </div>
                  <script>
                     var myDate = new Date().getFullYear();
                  </script>
                  <div class="col-md-6 panel" style="border-top: 3px solid #757472">
                     <div class="panel-body">
                        <p class="text-right">
                           Copyright &copy;&nbsp<?php echo date("Y"); ?> Developed by <a href="" rel="develop">Chamindu IT15000118 SLIIT</a>
                        </p>
                     </div>
                  </div>
               </div>
               <!-- /row of panels -->
            </div>
         </div>
      </footer>
      <script src="assets/js/modernizr-latest.js"></script> 
      <script type='text/javascript' src='assets/js/jquery.min.js'></script>
      <script type='text/javascript' src='assets/js/fancybox/jquery.fancybox.pack.js'></script>
      <script type='text/javascript' src='assets/js/jquery.mobile.customized.min.js'></script>
      <script type='text/javascript' src='assets/js/jquery.easing.1.3.js'></script> 
      <script type='text/javascript' src='assets/js/camera.min.js'></script> 
      <script src="assets/js/bootstrap.min.js"></script> 
      <script src="assets/js/custom.js"></script>
   </body>
</html>